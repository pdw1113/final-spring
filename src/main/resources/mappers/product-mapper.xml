<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<!-- 카테고리 호출 -->
<mapper namespace = "productMapper" >

	<resultMap type="UserMaster" id="userMasterResultSet">
		<id property="MASTER_NICKNAME" column="MASTER_NICKNAME"/>
		<result property="USER_EMAIL" column="USER_EMAIL"/>
		<result property="MASTER_RANKNAME" column="MASTER_RANKNAME"/>
		<result property="MASTER_PROFILE_PIC" column="MASTER_PROFILE_PIC"/>
		<result property="MASTER_CATEGORY" column="MASTER_CATEGORY"/>
		<result property="MASTER_ID_PIC" column="MASTER_ID_PIC"/>
		<result property="MASTER_WORKDAY" column="MASTER_WORKDAY"/>
		<result property="MASTER_WORKSTYLE" column="MASTER_WORKSTYLE"/>
		<result property="MASTER_STARTTIME" column="MASTER_STARTTIME"/>
		<result property="MASTER_ENDTIME" column="MASTER_ENDTIME"/>
	</resultMap>
	
	<resultMap type="Product" id="productResultSet">
		<id property="no" column="PRODUCT_NO"/>
		<result property="nickName" column="MASTER_NICKNAME"/>
		<result property="title" column="PRODUCT_TITLE"/>
		<result property="pic" column="PRODUCT_PIC"/>
		<result property="category" column="PRODUCT_CATEGORY"/>
		<result property="price" column="PRODCUT_PRICE"/>
		<result property="career" column="PRODUCT_CAREER"/>
		<result property="portfolio" column="PRODUCT_PORTFOLIO"/>
		<result property="introduce" column="PRODUCT_INTRODUCE"/>
		<result property="createDate" column="PRODUCT_CREATE_DATE"/>
		<result property="modifyDate" column="PRODUCT_MODIFY_DATE"/>
		<result property="count" column="PRODCUT_COUNT"/>
	</resultMap>
	

	<select id="category" resultType="com.fp.neezit.product.model.vo.ProductCategory">
		select
			LEVEL, CATENAME, CATECODE, CATECODEREF
		from GOODS_CATEGORY
			start with CATECODEREF is null
			connect by prior CATECODE = CATECODEREF
	</select>
	
	<select id="categoryList" resultType="com.fp.neezit.product.model.vo.ProductCategory">
		select
			LEVEL, CATENAME, CATECODE, CATECODEREF
		from GOODS_CATEGORY
			start with CATECODE = #{navNo}
			connect by prior CATECODE = CATECODEREF
	</select>

	<select id="categoryList2" resultType="com.fp.neezit.product.model.vo.ProductCategory">
		 select
			LEVEL, CATENAME, CATECODE, CATECODEREF
		from GOODS_CATEGORY
            WHERE LEVEL = 1
			start with CATECODEREF = #{navNo}
			connect by prior CATECODE = CATECODEREF
	</select>
	
<!-- 	<select id="categoryList3" resultType="com.fp.neezit.product.model.vo.ProductCategory">
		 select
			LEVEL, CATENAME, CATECODE, CATECODEREF
		from GOODS_CATEGORY
            WHERE CATECODEREF = 10
			start with CATECODE = 10
			connect by prior CATECODE = CATECODEREF
	</select> -->
	
	<select id="getMaster" parameterType="User" resultMap="userMasterResultSet">
			SELECT MASTER_NICKNAME,MASTER_RANKNAME 
			FROM NEEZ_MASTER WHERE USER_EMAIL=#{email}
	</select>
	
	<insert id="insertProduct" parameterType="Product">
		INSERT INTO PRODUCT VALUES
		(#{nickName},SEQ_PRODUCT_NO.NEXTVAL,#{title},'dongmin.png','카테고리입니다',#{price},#{career},#{portfolio},#{introduce},DEFAULT,DEFAULT,DEFAULT)
	</insert>
	
</mapper>

